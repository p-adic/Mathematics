#ifdef DEBUG
  #include "c:/Users/user/Documents/Programming/Mathematics/Geometry/AffineSpace/Intersection/a_Body.hpp"
#else
#define DF_OF_AREA (x1 - x0)*(y2 - y0)-(y1 - y0)*(x2 - x0)
#define CALL_DF_OF_AREA Area (get<0>(v0),get<1>(v0),get<0>(v1),get<1>(v1),get<0>(v2),get<1>(v2))
IN ll Area_ll(CRL x0,CRL y0,CRL x1,CRL y1,CRL x2,CRL y2){RE DF_OF_AREA;}TE <TY INT> IN ll Area(CO INT& x0,CO INT& y0,CO INT& x1,CO INT& y1,CO INT& x2,CO INT& y2){RE Area_ll(x0,y0,x1,y1,x2,y2);}IN double Area(CO double& x0,CO double& y0,CO double& x1,CO double& y1,CO double& x2,CO double& y2){RE DF_OF_AREA;}TE <TY INT,TE <TY...> TY PAIR> IN ll Area(CO PAIR<INT,INT>& v0,CO PAIR<INT,INT>& v1,CO PAIR<INT,INT>& v2){RE CALL_DF_OF_AREA;}TE <TE <TY...> TY PAIR> IN double Area(CO PAIR<double,double>& v0,CO PAIR<double,double>& v1,CO PAIR<double,double>& v2){RE CALL_DF_OF_AREA;}TE <TY INT,TE <TY...> TY PAIR,TY RET> IN RET Area(CO VE<PAIR<INT,INT>>& v,RET dummy){CRI SZ = v.SZ();AS(SZ > 2);for(int i = 2;i < SZ;i++){dummy += Area(v[0],v[i-1],v[i]);}RE MO(dummy);}

TE <TY INT> IN int sign(CO INT& n,CO INT& epsilon = 0){CE bool is_not_double = !is_same_v<INT,double>;AS(is_not_double || epsilon > 0);RE n < -epsilon?-1:epsilon < n?1:0;}

TE <TY INT> IN INT L1(CO INT& x,CO INT& y){RE abs(x)+ abs(y);}TE <TY INT,TE <TY...> TY PAIR> IN INT L1(CO PAIR<INT,INT>& v){RE L1(get<0>(v),get<1>(v));}TE <TY INT> IN INT L1_Distance(CO INT& x0,CO INT& y0,CO INT& x1,CO INT& y1){RE L1(x0 - x1,y0 - y1);}TE <TY INT,TE <TY...> TY PAIR> IN INT L1_Distance(CO PAIR<INT,INT>& v0,CO PAIR<INT,INT>& v1){RE L1(get<0>(v0)- get<0>(v1),get<1>(v0)- get<1>(v1));}TE <TY INT> IN PAIR<INT,INT> L1_to_Linfty(CO INT& x,CO INT& y){RE{x + y,x - y};}TE <TY INT,TE <TY...> TY PAIR> IN PAIR<INT,INT> L1_to_Linfty(CO PAIR<INT,INT>& v){RE L1_to_Linfty(get<0>(v),get<1>(v));}TE <TY INT> IN PAIR<INT,INT> Linfty_to_L1(CO INT& x,CO INT& y){AS((x & 1)==(y & 1));RE{(x + y)>> 1,(x - y)>> 1};}TE <TY INT,TE <TY...> TY PAIR> IN PAIR<INT,INT> Linfty_to_L1(CO PAIR<INT,INT>& v){RE Linfty_to_L1(get<0>(v),get<1>(v));}TE <TY INT> IN bool L1_LongestEdge(CO INT& x0,CO INT& y0,CO INT& x1,CO INT& y1,CO INT& z,CO INT& w,CO INT& epsilon = 0){RE sign(L1_Distance(x0,y0,x1,y1)- max(L1_Distance(x0,y0,z,w),L1_Distance(z,w,x1,y1)),epsilon)>= 0;}TE <TY INT,TE <TY...> TY PAIR> IN bool L1_LongestEdge(CO PAIR<INT,INT>& v0,CO PAIR<INT,INT>& v1,CO PAIR<INT,INT>& v2,CO INT& epsilon = 0){RE L1_LongestEdge(get<0>(v0),get<1>(v0),get<0>(v1),get<1>(v1),get<0>(v2),get<1>(v2),epsilon);}

TE <TY INT> IN bool Online(CO INT& x0,CO INT& y0,CO INT& x1,CO INT& y1,CO INT& z,CO INT& w,CO INT& epsilon = 0){RE sign(Area(x0,y0,x1,y1,z,w),epsilon)== 0 && L1_LongestEdge(x0,y0,x1,y1,z,w,epsilon);}TE <TY INT,TE <TY...> TY PAIR> IN bool Online(CO PAIR<INT,INT>& v0,CO PAIR<INT,INT>& v1,CO PAIR<INT,INT>& v2,CO INT& epsilon = 0){RE Online(get<0>(v0),get<1>(v0),get<0>(v1),get<1>(v1),get<0>(v2),get<1>(v2),epsilon);}TE <TY INT> IN int IntersectionType(CO INT& x0,CO INT& y0,CO INT& x1,CO INT& y1,CO INT& z0,CO INT& w0,CO INT& z1,CO INT& w1,CO INT& epsilon = 0){CO int sign00 = sign(Area(x0,y0,x1,y1,z0,w0),epsilon),sign01 = sign(Area(x0,y0,x1,y1,z1,w1),epsilon),sign10 = sign(Area(z0,w0,z1,w1,x0,y0),epsilon),sign11 = sign(Area(z0,w0,z1,w1,x1,y1),epsilon);RE sign00 * sign01 < 0 && sign10 * sign11 < 0?1:((sign00 == 0 && L1_LongestEdge(x0,y0,x1,y1,z0,w0,epsilon))||(sign01 == 0 && L1_LongestEdge(x0,y0,x1,y1,z1,w1,epsilon))||(sign10 == 0 && L1_LongestEdge(z0,w0,z1,w1,x0,y0,epsilon))||(sign11 == 0 && L1_LongestEdge(z0,w0,z1,w1,x1,y1,epsilon)))?0:-1;}TE <TY INT,TE <TY...> TY PAIR> IN int IntersectionType(CO PAIR<INT,INT>& v0,CO PAIR<INT,INT>& v1,CO PAIR<INT,INT>& v2,CO PAIR<INT,INT>& v3,CO INT& epsilon = 0){RE IntersectionType(get<0>(v0),get<1>(v0),get<0>(v1),get<1>(v1),get<0>(v2),get<1>(v2),get<0>(v3),get<1>(v3),epsilon);}
#endif

