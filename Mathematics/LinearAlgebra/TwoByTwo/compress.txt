TE <TY T>CL TTMA{PU:T m_M00;T m_M01;T m_M10;T m_M11;IN TTMA(CO T& M00,CO T& M01,CO T& M10,CO T& M11) NE;IN TTMA(T&& M00,T&& M01,T&& M10,T&& M11) NE;IN TTMA(CO T& n = T()) NE;IN TTMA(CRI n) NE;IN TTMA(CO MA<2,2,T>& mat);IN TTMA(CO TTMA<T>& mat) NE;IN TTMA(TTMA<T>&& mat) NE;IN TTMA<T>& OP=(CO TTMA<T>& mat) NE;IN TTMA<T>& OP=(TTMA<T>&& mat) NE;IN TTMA<T>& OP*=(CO TTMA<T>& mat) NE;IN MA<2,2,T> GetMA22() CO NE;ST IN TTMA<T> Multiply(CO TTMA<T>& mat1,CO TTMA<T>& mat2);ST IN TTMA<T> Square(CO TTMA<T>& mat);};TE <TY T> IN TTMA<T> OP*(CO TTMA<T>& mat1,CO TTMA<T>& mat2);TE <TY T> IN TTMA<T> Square(CO TTMA<T>& mat);
TE <TY T> IN TTMA<T>::TTMA(CO T& M00,CO T& M01,CO T& M10,CO T& M11) NE:m_M00(M00),m_M01(M01),m_M10(M10),m_M11(M11){}TE <TY T> IN TTMA<T>::TTMA(T&& M00,T&& M01,T&& M10,T&& M11) NE:m_M00(MO(M00)),m_M01(MO(M01)),m_M10(MO(M10)),m_M11(MO(M11)){}TE <TY T> IN TTMA<T>::TTMA(CO T& n) NE:m_M00(n),m_M01(),m_M10(),m_M11(n){}TE <TY T> IN TTMA<T>::TTMA(CRI n) NE:TTMA(T(n)){}TE <TY T> IN TTMA<T>::TTMA(CO TTMA<T>& mat) NE:m_M00(mat.m_M00),m_M01(mat.m_M01),m_M10(mat.m_M10),m_M11(mat.m_M11){}TE <TY T> IN TTMA<T>::TTMA(TTMA<T>&& mat) NE:m_M00(MO(mat.m_M00)),m_M01(MO(mat.m_M01)),m_M10(MO(mat.m_M10)),m_M11(MO(mat.m_M11)){}TE <TY T> IN TTMA<T>::TTMA(CO MA<2,2,T>& mat): m_M00(),m_M01(),m_M10(),m_M11(){CO TT<T>& M = mat.GetTable();CO VE<T>& M0 = M[0];CO VE<T>& M1 = M[1];m_M00 = M0[0];m_M01 = M0[1];m_M10 = M1[0];m_M11 = M1[1];}TE <TY T> IN TTMA<T>& TTMA<T>::OP=(CO TTMA<T>& mat) NE{if(&mat != TH){m_M00 = mat.m_M00;m_M01 = mat.m_M01;m_M10 = mat.m_M10;m_M11 = mat.m_M11;}RE *TH;}TE <TY T> IN TTMA<T>& TTMA<T>::OP=(TTMA<T>&& mat) NE{m_M00 = MO(mat.m_M00);m_M01 = MO(mat.m_M01);m_M10 = MO(mat.m_M10);m_M11 = MO(mat.m_M11);RE *TH;}TE <TY T> IN TTMA<T>& TTMA<T>::OP*=(CO TTMA<T>& mat) NE{RE OP=(Multiply(*TH,mat));}TE <TY T> IN MA<2,2,T> TTMA<T>::GetMA22() CO NE{RE MA<2,2,T>(m_M00,m_M01,m_M10,m_M11);}TE <TY T> IN TTMA<T> TTMA<T>::Multiply(CO TTMA<T>& mat1,CO TTMA<T>& mat2){RE TTMA<T>(mat1.m_M00 * mat2.m_M00 + mat1.m_M01 * mat2.m_M10,mat1.m_M00 * mat2.m_M01 + mat1.m_M01 * mat2.m_M11,mat1.m_M10 * mat2.m_M00 + mat1.m_M11 * mat2.m_M10,mat1.m_M10 * mat2.m_M01 + mat1.m_M11 * mat2.m_M11);}TE <TY T> IN TTMA<T> TTMA<T>::Square(CO TTMA<T>& mat){RE TTMA<T>(mat.m_M00 * mat.m_M00 + mat.m_M01 * mat.m_M10,(mat.m_M00 + mat.m_M11) * mat.m_M01,mat.m_M10 * (mat.m_M00 + mat.m_M11),mat.m_M10 * mat.m_M01 + mat.m_M11 * mat.m_M11);}TE <TY T> IN TTMA<T> OP*(CO TTMA<T>& mat1,CO TTMA<T>& mat2){RE TTMA<T>::Multiply(mat1,mat2);}TE <TY T> IN TTMA<T> Square(CO TTMA<T>& mat){RE TTMA<T>::Square(mat);}
